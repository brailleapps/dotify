<html xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:pef="http://www.daisy.org/ns/2008/pef" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:obfl="http://www.daisy.org/ns/2011/obfl">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Dotify Formatter Tests</title>
<style type="text/css">
					div.volume, div.section {
						border-left-style: solid;
						border-color: #ddd;
						border-width: 1px;
						margin: 1em 1em;
					}
					div.page {
						margin: 1em 1em;
						border-style: solid;
						border-width: 1px;
						background-color: #fefefe;
					}
					div.label {
						font-family: sans-serif;
						text-color: green;
					}
					span.element {
						padding-right: 1em;
					}
					body {
						font-family: sans-serif;
						margin: 2em 2em;
					}
					h1 {
						margin-top: 2em;
					}
					a.internal {
						color: white;
						text-decoration: none;
					}
					a.internal:hover {
						color: grey;
					}
				</style>
</head>
<body>
<h1 id="border-center-input.obfl">Border center test<a href="#border-center-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests border alignment.</p>
<h2>border-center-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Border center test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="40" page-height="29" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;block border-style="solid" border-width="1" border-align="center"&gt;⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>border-center-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-10&lt;/dc:date&gt;
      &lt;dc:title&gt;Nested borders margin test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests margins with multiple borders. This test verifies that margins that are separated by borders aren't collapsed.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="29" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠖⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠲&lt;/row&gt;
          &lt;row&gt;⠇⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠓⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠚&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="border-inner-input.obfl">Border inner test<a href="#border-inner-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests border alignment.</p>
<h2>border-inner-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Border inner test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="40" page-height="29" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;block border-style="solid" border-width="1" border-align="inner"&gt;⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>border-inner-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-10&lt;/dc:date&gt;
      &lt;dc:title&gt;Border inner test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="29" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠠⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠄&lt;/row&gt;
          &lt;row&gt;⠸⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠇&lt;/row&gt;
          &lt;row&gt;⠈⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="border-outer-input.obfl">Border outer test<a href="#border-outer-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests border alignment.</p>
<h2>border-outer-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Border outer test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="40" page-height="29" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;block border-style="solid" border-width="1" border-align="outer"&gt;⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>border-outer-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-10&lt;/dc:date&gt;
      &lt;dc:title&gt;Border outer test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="29" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠇⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="field-style-input.obfl">Field text style test<a href="#field-style-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that text styles can be used with fields.</p>
<h2>field-style-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Field text style test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that text styles can be used with fields.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field text-style="strong"&gt;
          &lt;string value="page "/&gt;
          &lt;current-page text-style="em"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>field-style-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-12&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠨⠨⠏⠁⠛⠑⠀⠠⠄⠼⠁⠱&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="hyphenate-input.obfl">Hyphenation test<a href="#hyphenate-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the hyphenation property works.</p>
<h2>hyphenate-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Hyphenation test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the hyphenation property works.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="8" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body" hyphenate="true"&gt;
    &lt;block&gt;hyphenation&lt;/block&gt;
    &lt;block hyphenate="false"&gt;hyphenation
			
      &lt;block hyphenate=""&gt;hyphenation&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>hyphenate-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-16&lt;/dc:date&gt;
      &lt;dc:title&gt;Hyphenation test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that the hyphenation property works.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="8" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠓⠽⠏⠓⠑⠝⠁⠤&lt;/row&gt;
          &lt;row&gt;⠞⠊⠕⠝&lt;/row&gt;
          &lt;row&gt;⠓⠽⠏⠓⠑⠝⠁⠞&lt;/row&gt;
          &lt;row&gt;⠊⠕⠝&lt;/row&gt;
          &lt;row&gt;⠓⠽⠏⠓⠑⠝⠁⠤&lt;/row&gt;
          &lt;row&gt;⠞⠊⠕⠝&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="keep-input.obfl">Keep test<a href="#keep-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the keep property</p>
<h2>keep-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Keep test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the keep property&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block break-before="page"&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ &lt;/block&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>keep-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="leader-right-input.obfl">Single leader test<a href="#leader-right-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests a single right aligned leader with two items after (space and page number)</p>
<h2>leader-right-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Single leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests a single right aligned leader with two items after (space and page number)&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
      &lt;page-number ref-id="chapter_1" style="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>leader-right-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠄⠄⠄⠄⠄⠄⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="leader-right-multiple-input.obfl">Multiple leaders test<a href="#leader-right-multiple-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests multiple right aligned leaders on the same row</p>
<h2>leader-right-multiple-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Multiple leaders test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests multiple right aligned leaders on the same row&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="30%" align="right"/&gt;1
      &lt;leader pattern="⠄" position="60%" align="right"/&gt;2
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;3
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>leader-right-multiple-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠼⠁⠄⠼⠃⠄⠄⠼⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="leader-right-simple-input.obfl">Simple leader test<a href="#leader-right-simple-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests a single right aligned leader with a only one item after</p>
<h2>leader-right-simple-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Simple leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests a single right aligned leader with a only one item after&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
      &lt;page-number ref-id="chapter_1" style="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>leader-right-simple-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠄⠄⠄⠄⠄⠄⠄⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin-input.obfl">Collapsing margins test<a href="#margin-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that margins collapse properly.</p>
<h2>margin-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Collapsing margins test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that margins collapse properly.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-top="3" margin-bottom="2"&gt;
      &lt;block margin-top="2" margin-bottom="3"&gt;⠤⠤&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="2" margin-bottom="2"&gt;⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-07&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin-nested-input.obfl">Nested borders margin test<a href="#margin-nested-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests margins with multiple borders. This test verifies that margins that are separated by
		borders aren't collapsed.</p>
<h2>margin-nested-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Nested borders margin test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests margins with multiple borders. This test verifies that margins that are separated by
		borders aren't collapsed.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="18" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2"&gt;
      &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2" margin-top="1" margin-bottom="1"&gt;
        &lt;block margin-left="1" margin-right="1" margin-top="1" margin-bottom="1"&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin-nested-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="18" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠏⠉⠉⠉⠉⠉⠉⠹⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠤⠤⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠧⠤⠤⠤⠤⠤⠤⠼⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin-nested2-input.obfl">Nested borders margin test<a href="#margin-nested2-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests margins with multiple borders.</p>
<h2>margin-nested2-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Nested borders margin test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests margins with multiple borders.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block align="center" margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
      &lt;block align="center" margin-top="1" margin-bottom="1" margin-left="1" margin-right="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block align="center" margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner" break-before="page"&gt;
      &lt;block align="center" margin-top="1" margin-bottom="1"&gt;
        &lt;block align="center" margin-left="2" margin-right="2" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
          &lt;block align="center" margin-top="1" margin-bottom="1" margin-left="1" margin-right="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
        &lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin-nested2-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin2-input.obfl">
<a href="#margin2-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>margin2-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-bottom="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
    &lt;block margin-top="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin2-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier/&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-indicator-input.obfl">Margin region indicators test<a href="#marker-indicator-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that margin region indicators work.</p>
<h2>marker-indicator-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Margin region indicators test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that margin region indicators work.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="6" duplex="false" inner-margin="2" outer-margin="2"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="pages" indicator="⠿"/&gt;
          &lt;marker-indicator markers="sections" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
      &lt;margin-region align="right" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="pages sections" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="sections" value="1"/&gt;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;
      &lt;marker class="pages" value="1"/&gt;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-indicator-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-12-08&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠿⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠿⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-page-input.obfl">Marker reference page search test<a href="#marker-ref-page-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a page.</p>
<h2>marker-ref-page-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference page search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="page"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="page"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-page-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
      &lt;dc:title&gt;Marker reference search test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-sheet-input.obfl">Marker reference sheet search test<a href="#marker-ref-sheet-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a sheet. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-sheet-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference sheet search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a sheet. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="sheet"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="sheet" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="sheet" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="sheet"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-sheet-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
      &lt;dc:title&gt;Marker reference search test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-spread-input.obfl">Marker reference spread search test<a href="#marker-ref-spread-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a spread. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-spread-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference spread search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a spread. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-spread-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
      &lt;dc:title&gt;Marker reference search test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠚⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-spread-sequence-input.obfl">Marker reference spread search test<a href="#marker-ref-spread-sequence-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a spread, but across different sequences. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-spread-sequence-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference spread search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a spread, but across different sequences. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="main"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-spread-sequence-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠚⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="multi-line-footer-input.obfl">Multi line footer test<a href="#multi-line-footer-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that multiple footers work.</p>
<h2>multi-line-footer-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Multi line footer test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that multiple footers work.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>multi-line-footer-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-07&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="multi-line-header-input.obfl">Multi line header test<a href="#multi-line-header-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that multiple headers work.</p>
<h2>multi-line-header-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Multi line header test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that multiple headers work.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>multi-line-header-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-07&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="orphans-input.obfl">Orphans test<a href="#orphans-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the orphans property works as expected.</p>
<h2>orphans-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Orphans test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the orphans property works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-top="4"&gt;⠤⠤&lt;/block&gt;
    &lt;block orphans="1"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-top="4"&gt;⠤⠤&lt;/block&gt;
    &lt;block orphans="2"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>orphans-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-06&lt;/dc:date&gt;
      &lt;dc:title&gt;Orphans test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that the orphans property works as expected.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="padding-input.obfl">Padding test<a href="#padding-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the padding property</p>
<h2>padding-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Padding test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the padding property&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2" padding-left="2" padding-right="2" padding-top="1" padding-bottom="1"&gt;
      &lt;block&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>padding-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠤⠤⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="padding-nested-input.obfl">Nested borders padding test<a href="#padding-nested-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests padding with multiple borders</p>
<h2>padding-nested-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Nested borders padding test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests padding with multiple borders&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="18" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2" padding-left="2" padding-right="2" padding-top="1" padding-bottom="1"&gt;
      &lt;block border-style="solid" border-width="1" padding-left="1" padding-right="1" padding-top="1" padding-bottom="1"&gt;
        &lt;block&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>padding-nested-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="18" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠏⠉⠉⠉⠉⠉⠉⠹⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠤⠤⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠧⠤⠤⠤⠤⠤⠤⠼⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="padding-sides-only-input.obfl">Padding with borders on sides test<a href="#padding-sides-only-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests padding with borders only on the sides</p>
<h2>padding-sides-only-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Padding with borders on sides test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests padding with borders only on the sides&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-left-style="solid" border-right-style="solid" border-width="1" margin-left="2" margin-right="2" padding-left="2" padding-right="2" padding-top="1" padding-bottom="1"&gt;
      &lt;block&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>padding-sides-only-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠤⠤⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="row-spacing-input.obfl">Row spacing test<a href="#row-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests collapsing margins of blocks with different row spacing.</p>
<h2>row-spacing-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="sv"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Row spacing test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests collapsing margins of blocks with different row spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>row-spacing-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-22&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="translate-input.obfl">Translation test<a href="#translate-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the translate property works. Note that this test uses an
		implementation specific translation mode, which isn't in the OBFL-specification. Also,
		because of this the generated PEF-file is invalid, but it proves that the translator 
		property works.</p>
<h2>translate-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Translation test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the translate property works. Note that this test uses an
		implementation specific translation mode, which isn't in the OBFL-specification. Also,
		because of this the generated PEF-file is invalid, but it proves that the translator 
		property works.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;Translation&lt;/block&gt;
    &lt;block translate="bypass"&gt;no translation&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>translate-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-28&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠠⠞⠗⠁⠝⠎⠇⠁⠞⠊⠕⠝&lt;/row&gt;
          &lt;row&gt;no translation&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-before-input.obfl">Vertical position test: Before alignment<a href="#vertical-position-before-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property with "before" alignment and both padding, margin and border.</p>
<h2>vertical-position-before-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test: Before alignment&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property with "before" alignment and both padding, margin and border.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="100%" vertical-align="before" padding-top="1" padding-bottom="1" margin-top="1" margin-bottom="1" border-top-style="solid" border-bottom-style="solid"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-before-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-borders-input.obfl">Vertical position test: Top border<a href="#vertical-position-borders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property with a top border.</p>
<h2>vertical-position-borders-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test: Top border&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property with a top border.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="3" padding-top="1" vertical-align="after" border-top-style="solid"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-borders-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-dls-input.obfl">Vertical position test: Double line spacing<a href="#vertical-position-dls-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property together with double line spacing.</p>
<h2>vertical-position-dls-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test: Double line spacing&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property together with double line spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="10" duplex="false" row-spacing="2.0"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="2" vertical-align="after"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-dls-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="10" rowgap="4" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row rowgap="0"&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-input.obfl">Vertical position test<a href="#vertical-position-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property.</p>
<h2>vertical-position-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="3" vertical-align="after"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="widows-input.obfl">Widows test<a href="#widows-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the widows property works as expected.</p>
<h2>widows-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Widows test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the widows property works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
    &lt;block widows="1"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
    &lt;block widows="2"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>widows-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-06&lt;/dc:date&gt;
      &lt;dc:title&gt;Widows test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that the widows property works as expected.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_01-input.obfl">test_01<a href="#test_format.xprocspec\test_01-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_01-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_01&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="30" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="b" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="b"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_01-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_01&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="30" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section cols="15"&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_02-input.obfl">test_02<a href="#test_format.xprocspec\test_02-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_02-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_02&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="running-header" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="running-header" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="running-header/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="running-footer" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="running-footer" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="running-footer/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="⠤"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="print-page/prev" value="⠤"/&gt;
      &lt;marker class="print-page" value="⠤⠤"/&gt;
      &lt;marker class="running-footer/prev" value="​"/&gt;
      &lt;marker class="running-footer" value="⠤⠤"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="print-page/prev" value="⠤⠤"/&gt;
      &lt;marker class="print-page" value="​"/&gt;
      &lt;marker class="running-header/prev" value="​"/&gt;
      &lt;marker class="running-header" value="⠤⠤"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="⠤⠤⠤"/&gt;
      &lt;marker class="running-footer/prev" value="⠤⠤"/&gt;
      &lt;marker class="running-footer" value="​"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_02-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_02&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_03-input.obfl">test_03<a href="#test_format.xprocspec\test_03-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_03-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_03&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="b" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="running-footer" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="running-footer" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="running-footer/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="⠤"/&gt;
      &lt;marker class="running-footer/prev" value="​"/&gt;
      &lt;marker class="running-footer" value="⠤⠤"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="b"&gt;
    &lt;block&gt;
      &lt;marker class="print-page/entry" value="⠤"/&gt;
      &lt;marker class="running-footer/entry" value="⠤⠤"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_03-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_03&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_04-input.obfl">test_04<a href="#test_format.xprocspec\test_04-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_04-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_04&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="b" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="c" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="b"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a" initial-page-number="10"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="c"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_04-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_04&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠑&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠚&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_05-input.obfl">test_05<a href="#test_format.xprocspec\test_05-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_05-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_05&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="front" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠏"/&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="rear" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="lower-roman"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="front"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="rear" initial-page-number="1"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_05-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_05&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠏⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_06-input.obfl">test_06<a href="#test_format.xprocspec\test_06-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_06-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_06&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
          &lt;string value=" "/&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="⠤⠤"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_06-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_06&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_07-input.obfl">test_07<a href="#test_format.xprocspec\test_07-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_07-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_07&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
      &lt;block keep="all"&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;
        &lt;block keep-with-next="1" keep="all"&gt;⠤⠤⠤&lt;/block&gt;
        &lt;block keep-with-next="1" keep="all"&gt;⠤⠤⠤&lt;/block&gt;
        &lt;block keep-with-next="1" keep="all"&gt;⠤⠤⠤&lt;/block&gt;
        &lt;block keep="all"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
      &lt;block keep-with-next="1" keep="all"&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;
        &lt;block&gt;⠤⠤⠤&lt;/block&gt;
        &lt;block keep-with-next="1" keep="all"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
      &lt;block orphans="3"&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
      &lt;block widows="3"&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
                ⠤⠤⠤⠤⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_07-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_07&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_08-input.obfl">test_08<a href="#test_format.xprocspec\test_08-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_08-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_08&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
      &lt;block orphans="3" border-top-style="solid" border-top-align="center" border-bottom-style="solid" border-bottom-align="center"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
      &lt;block widows="3" border-top-style="solid" border-top-align="center" border-bottom-style="solid" border-bottom-align="center"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_08-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_08&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_09-input.obfl">test_09<a href="#test_format.xprocspec\test_09-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_09-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_09&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤ &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤⠤ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_09-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_09&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_10-input.obfl">test_10<a href="#test_format.xprocspec\test_10-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_10-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_10&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠿⠿⠿⠿
            &lt;/block&gt;
    &lt;block break-before="page" align="center" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
      &lt;block align="center" margin-top="1" margin-bottom="1"&gt;⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_10-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_10&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_11-input.obfl">test_11<a href="#test_format.xprocspec\test_11-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_11-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_11&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block align="center" margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
      &lt;block align="center" margin-top="1" margin-bottom="1"&gt;
        &lt;block align="center" margin-left="2" margin-right="2" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
          &lt;block align="center" margin-top="1" margin-bottom="1" margin-left="1" margin-right="1"&gt;⠿⠿⠿⠿
                  &lt;/block&gt;
        &lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_11-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_11&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_12-input.obfl">test_12<a href="#test_format.xprocspec\test_12-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_12-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_12&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block align="center" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="center" border-bottom-style="solid" border-bottom-align="center"&gt;⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_12-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_12&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠖⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠲&lt;/row&gt;
          &lt;row&gt;⠇⠀⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠓⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠚&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_13-input.obfl">test_13<a href="#test_format.xprocspec\test_13-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_13-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_13&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="30" page-height="2" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠆
                  ⠤⠤⠤⠆
                  ⠤⠤⠤⠆
                  ⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_13-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_13&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="2" cols="30" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠆⠀⠤⠤⠤⠆⠀⠤⠤⠤⠆⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_14-input.obfl">test_14<a href="#test_format.xprocspec\test_14-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_14-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_14&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block margin-left="2"&gt;⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_14-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_14&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_15-input.obfl">test_15<a href="#test_format.xprocspec\test_15-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_15-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_15&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block margin-left="2"&gt;⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_15-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_15&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_16-input.obfl">test_16<a href="#test_format.xprocspec\test_16-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_16-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_16&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block first-line-indent="2"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_16-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_16&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_17-input.obfl">test_17<a href="#test_format.xprocspec\test_17-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_17-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_17&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block first-line-indent="2" text-indent="4"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_17-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_17&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_18-input.obfl">test_18<a href="#test_format.xprocspec\test_18-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_18-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_18&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block first-line-indent="2"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              &lt;/block&gt;
      &lt;block&gt;
        &lt;leader pattern="⠐" position="100%" align="right"/&gt;
                ⠿
              
      &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_18-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_18&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠐⠐⠐⠐⠐⠐⠐⠐⠐⠐⠐⠐⠐⠀⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_19-input.obfl">test_19<a href="#test_format.xprocspec\test_19-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_19-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_19&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;1 ⠤⠤⠤ &lt;/block&gt;
    &lt;block&gt;2 ⠤⠤⠤ &lt;/block&gt;
    &lt;block&gt;i ⠤⠤⠤ &lt;/block&gt;
    &lt;block&gt;ii ⠤⠤⠤ &lt;/block&gt;
    &lt;block&gt;3 ⠤⠤⠤ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_19-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_19&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠼⠃⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠊⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠊⠊⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_20-input.obfl">test_20<a href="#test_format.xprocspec\test_20-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_20-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_20&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="8" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠿
              
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
              ⠤
              
      &lt;page-number ref-id="chapter_1" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠿⠿
              
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
              ⠤
              
      &lt;page-number ref-id="chapter_2" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠿⠿⠿
              
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
              ⠤⠤
              
      &lt;page-number ref-id="chapter_3" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block align="center" break-before="page" id="chapter_1"&gt;
      &lt;marker class="print-page" value="⠤"/&gt;⠿
            
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
    &lt;block align="center" break-before="page" id="chapter_2"&gt;⠿⠿
            &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
    &lt;block align="center" break-before="page" id="chapter_3"&gt;
      &lt;marker class="print-page/prev" value="⠤"/&gt;
      &lt;marker class="print-page" value="⠤⠤"/&gt;⠿⠿⠿
            
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_20-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_20&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="8" cols="14" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠀⠄⠄⠄⠄⠄⠄⠄⠀⠤⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠄⠄⠄⠄⠄⠄⠀⠤⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠄⠄⠄⠄⠀⠤⠤⠀⠼⠙&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_21-input.obfl">test_21<a href="#test_format.xprocspec\test_21-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_21-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_21&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠿
              
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
      &lt;page-number ref-id="chapter_1" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠿⠿
              
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
      &lt;page-number ref-id="chapter_2" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;block id="chapter_1"&gt;⠿
              &lt;/block&gt;
      &lt;block id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
      &lt;block id="chapter_2"&gt;⠿⠿
              &lt;/block&gt;
      &lt;block id="y"&gt;⠤⠤⠤
              &lt;/block&gt;
      &lt;block id="z"&gt;⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;block&gt;⠤⠤⠤
                
        &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;page-number ref-id="x" number-format="default"/&gt;
      &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤
                
        &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;page-number ref-id="y" number-format="default"/&gt;
      &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤
                
        &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;page-number ref-id="z" number-format="default"/&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_21-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_21&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠀⠄⠄⠄⠄⠄⠄⠄⠄⠄⠄⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠄⠄⠄⠄⠄⠄⠄⠄⠄⠀⠼⠃&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠄⠄⠄⠄⠄⠄⠄⠄⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠄⠄⠄⠄⠄⠄⠄⠄⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠄⠄⠄⠄⠄⠄⠄⠄⠀⠼⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_22-input.obfl">test_22<a href="#test_format.xprocspec\test_22-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_22-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_22&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="8" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="foo" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤
              
      &lt;span id="foo"&gt;
                ⠿
              &lt;/span&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_22-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_22&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="8" cols="14" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_23-input.obfl">test_23<a href="#test_format.xprocspec\test_23-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_23-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_23&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
      &lt;br/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_23-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_23&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_24-input.obfl">test_24<a href="#test_format.xprocspec\test_24-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_24-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_24&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block vertical-align="before" vertical-position="5"&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_24-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_24&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_25-input.obfl">test_25<a href="#test_format.xprocspec\test_25-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_25-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_25&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="12" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿ ⠿⠿⠿&shy;⠿⠿⠿ ⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_25-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_25&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_26-input.obfl">test_26<a href="#test_format.xprocspec\test_26-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_26-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_26&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-bottom="1"&gt;⠿⠿⠿⠿
            &lt;/block&gt;
    &lt;block margin-top="1"&gt;⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_26-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_26&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_27-input.obfl">test_27<a href="#test_format.xprocspec\test_27-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_27-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_27&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1"&gt;⠿ &lt;/block&gt;
    &lt;block margin-bottom="1"/&gt;
    &lt;block margin-top="1"&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_27-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_27&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_28-input.obfl">test_28<a href="#test_format.xprocspec\test_28-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_28-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_28&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_28-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_28&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_29-input.obfl">test_29<a href="#test_format.xprocspec\test_29-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_29-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_29&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_29-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_29&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_30-input.obfl">test_30<a href="#test_format.xprocspec\test_30-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_30-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_30&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_30-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_30&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_31-input.obfl">test_31<a href="#test_format.xprocspec\test_31-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_31-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_31&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="center"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ &lt;/block&gt;
    &lt;/block&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_31-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_31&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_32-input.obfl">test_32<a href="#test_format.xprocspec\test_32-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_32-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_32&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1"&gt;
      &lt;block row-spacing="2.0" align="center"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ &lt;/block&gt;
    &lt;/block&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_32-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_32&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_33-input.obfl">test_33<a href="#test_format.xprocspec\test_33-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_33-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_33&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_33-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_33&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_34-input.obfl">test_34<a href="#test_format.xprocspec\test_34-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_34-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_34&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_34-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_34&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_35-input.obfl">test_35<a href="#test_format.xprocspec\test_35-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_35-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_35&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_35-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_35&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_36-input.obfl">test_36<a href="#test_format.xprocspec\test_36-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_36-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_36&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_36-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_36&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_37-input.obfl">test_37<a href="#test_format.xprocspec\test_37-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_37-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_37&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
    &lt;block break-before="page"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_37-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_37&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_38-input.obfl">test_38<a href="#test_format.xprocspec\test_38-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_38-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_38&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
    &lt;block/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
    &lt;block&gt;&nbsp;&lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
    &lt;block margin-bottom="1"/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_38-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_38&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_39-input.obfl">test_39<a href="#test_format.xprocspec\test_39-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_39-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_39&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="outer"/&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="outer"/&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="outer"&gt;&nbsp; &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_39-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_39&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_40-input.obfl">test_40<a href="#test_format.xprocspec\test_40-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_40-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_40&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="foo" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block/&gt;
    &lt;block id="foo"&gt;⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_40-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_40&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_41-input.obfl">test_41<a href="#test_format.xprocspec\test_41-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_41-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_41&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="8" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠿⠿⠿&shy;⠿⠿⠿ ⠿⠿⠿&shy;⠿⠿⠿
            &lt;/block&gt;
    &lt;block hyphenate="false"&gt;⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
    &lt;block&gt;1 ⠿⠿⠿
            &lt;/block&gt;
    &lt;block&gt;⠂ ⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_41-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_41&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="8" cols="12" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠂⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_42-input.obfl">test_42<a href="#test_format.xprocspec\test_42-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_42-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_42&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_42-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_42&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_43-input.obfl">test_43<a href="#test_format.xprocspec\test_43-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_43-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_43&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_43-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_43&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_44-input.obfl">test_44<a href="#test_format.xprocspec\test_44-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_44-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_44&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_44-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_44&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_45-input.obfl">test_45<a href="#test_format.xprocspec\test_45-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_45-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_45&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_45-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_45&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_46-input.obfl">test_46<a href="#test_format.xprocspec\test_46-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_46-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_46&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_46-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_46&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_47-input.obfl">test_47<a href="#test_format.xprocspec\test_47-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_47-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_47&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_47-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_47&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_48-input.obfl">test_48<a href="#test_format.xprocspec\test_48-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_48-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_48&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page/prev" direction="forward" scope="page-content" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
          &lt;marker-reference marker="dash-print-page" direction="backward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page/prev" direction="forward" scope="page-content" text-style="def:tmp" start-offset="-1"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp" start-offset="-1"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
          &lt;marker-reference marker="dash-print-page" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page/prev" direction="forward" scope="page-content" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
          &lt;marker-reference marker="dash-print-page" direction="backward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="1"/&gt;
      &lt;marker class="dash-print-page/prev" value="​"/&gt;
      &lt;marker class="dash-print-page" value="⠒1"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="1"/&gt;
      &lt;marker class="print-page" value="2"/&gt;
      &lt;marker class="dash-print-page/prev" value="⠒1"/&gt;
      &lt;marker class="dash-print-page" value="⠒2"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="2"/&gt;
      &lt;marker class="print-page" value="3"/&gt;
      &lt;marker class="dash-print-page/prev" value="⠒2"/&gt;
      &lt;marker class="dash-print-page" value="⠒3"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="3"/&gt;
      &lt;marker class="print-page" value="4"/&gt;
      &lt;marker class="dash-print-page/prev" value="⠒3"/&gt;
      &lt;marker class="dash-print-page" value="⠒4"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="4"/&gt;
      &lt;marker class="print-page" value="5"/&gt;
      &lt;marker class="dash-print-page/prev" value="⠒4"/&gt;
      &lt;marker class="dash-print-page" value="⠒5"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_48-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_48&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠁⠒⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠒⠼⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠃⠒⠼⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠃⠒⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠃⠒⠼⠉&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠙⠒⠼⠑⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠑⠒⠼⠑⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙⠒⠼⠑&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_49-input.obfl">test_49<a href="#test_format.xprocspec\test_49-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_49-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_49&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="1000"&gt;
    &lt;pre-content&gt;
      &lt;sequence master="main"&gt;
        &lt;block&gt;⠿⠿⠿
                &lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/pre-content&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="main"&gt;
    &lt;block&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_49-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_49&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_50-input.obfl">test_50<a href="#test_format.xprocspec\test_50-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_50-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_50&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="3"/&gt;
  &lt;sequence master="main"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_50-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_50&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_51-input.obfl">test_51<a href="#test_format.xprocspec\test_51-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_51-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_51&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template use-when="(! (= $volume 1))" sheets-in-volume-max="3"/&gt;
  &lt;volume-template use-when="(= $volume 1)" sheets-in-volume-max="2"/&gt;
  &lt;sequence master="main"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_51-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_51&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_52-input.obfl">test_52<a href="#test_format.xprocspec\test_52-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_52-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_52&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page/prev" direction="forward" scope="page-content" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="1"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="1"/&gt;
      &lt;marker class="print-page" value="2"/&gt;⠁⠁⠁
            
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_52-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_52&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_53-input.obfl">test_53<a href="#test_format.xprocspec\test_53-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_53-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_53&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page/prev" direction="forward" scope="page-content" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="print-page/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="​"/&gt;
      &lt;marker class="print-page" value="1"/&gt;⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              
      &lt;marker class="print-page/prev" value="1"/&gt;
      &lt;marker class="print-page" value="2"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
            &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="print-page/prev" value="2"/&gt;
      &lt;marker class="print-page" value="3"/&gt;⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              
      &lt;marker class="print-page/prev" value="3"/&gt;
      &lt;marker class="print-page" value="4"/&gt;
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
              ⠁⠁⠁⠁⠁
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_53-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_53&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠃⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_54-input.obfl">test_54<a href="#test_format.xprocspec\test_54-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_54-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_54&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="forward" scope="page" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="foo/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/prev" direction="forward" scope="page-content" text-style="def:tmp"/&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence" text-style="defifndef:tmp"/&gt;
          &lt;marker-reference marker="foo/entry" direction="backward" scope="sequence" text-style="ifndef:tmp"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo/prev" value="​"/&gt;
      &lt;marker class="foo" value="⠿"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo/entry" value="⠿"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤
              
      &lt;marker class="foo/prev" value="⠿"/&gt;
      &lt;marker class="foo" value="⠿⠿"/&gt;
              ⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo/entry" value="⠿⠿"/&gt;
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo/prev" value="⠿⠿"/&gt;
      &lt;marker class="foo" value="⠿⠿⠿"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_54-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_54&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠀⠀⠀⠀⠀⠀⠀⠀⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠀⠀⠀⠀⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_55-input.obfl">test_55<a href="#test_format.xprocspec\test_55-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_55-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_55&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators/&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_55-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_55&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_56-input.obfl">test_56<a href="#test_format.xprocspec\test_56-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_56-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_56&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="indicator/pagenum" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="indicator/pagenum" value="x"/&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              
      &lt;marker class="indicator/pagenum" value="x"/&gt;
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              
      &lt;marker class="indicator/pagenum" value="x"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_56-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_56&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_format.xprocspec\test_57-input.obfl">test_57<a href="#test_format.xprocspec\test_57-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_format.xprocspec\test_57-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_57&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="1"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="indicator/pagenum" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="indicator/pagenum" value="x"/&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              
      &lt;marker class="indicator/pagenum" value="x"/&gt;
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              
      &lt;marker class="indicator/pagenum" value="x"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_format.xprocspec\test_57-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_57&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_01-input.obfl">test_01<a href="#test_obfl-to-pef.xprocspec\test_01-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_01-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_01&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="5" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="print-page" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="print-page" value="⠤"/&gt;⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_01-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_01&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_02-input.obfl">test_02<a href="#test_obfl-to-pef.xprocspec\test_02-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_02-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_02&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="x" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page" id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_02-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_02&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_03-input.obfl">test_03<a href="#test_obfl-to-pef.xprocspec\test_03-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_03-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_03&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="x" number-format="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence&gt;
    &lt;block id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_03-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_03&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_04-input.obfl">test_04<a href="#test_obfl-to-pef.xprocspec\test_04-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_04-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_04&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;⠀
      &lt;page-number ref-id="chapter_1" number-format="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_04-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_04&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠄⠄⠄⠄⠄⠄⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_05-input.obfl">test_05<a href="#test_obfl-to-pef.xprocspec\test_05-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_05-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_05&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-left="1" margin-right="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
      &lt;block margin-left="2" margin-right="2" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
        &lt;block margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" align="center"&gt;⠿⠿⠿⠿
                  &lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_05-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_05&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="10" cols="20" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_06-input.obfl">test_06<a href="#test_obfl-to-pef.xprocspec\test_06-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_06-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_06&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="center" border-bottom-style="solid" border-bottom-align="center" align="center"&gt;⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_06-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_06&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠖⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠲&lt;/row&gt;
          &lt;row&gt;⠇⠀⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠓⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠚&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_07-input.obfl">test_07<a href="#test_obfl-to-pef.xprocspec\test_07-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_07-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_07&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="x" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page" id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_07-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_07&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠞⠺⠕&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_08-input.obfl">test_08<a href="#test_obfl-to-pef.xprocspec\test_08-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_08-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_08&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block vertical-align="before" vertical-position="5"&gt;⠤⠤⠤
      &lt;br/&gt;
              ⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_08-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_08&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_09-input.obfl">test_09<a href="#test_obfl-to-pef.xprocspec\test_09-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_09-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_09&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block vertical-align="before" vertical-position="5"&gt;
      &lt;block&gt;⠤⠤⠤ &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤ &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_09-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_09&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_10-input.obfl">test_10<a href="#test_obfl-to-pef.xprocspec\test_10-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_10-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_10&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠀⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_10-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_10&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_11-input.obfl">test_11<a href="#test_obfl-to-pef.xprocspec\test_11-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_11-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_11&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25" row-spacing="2.0"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_11-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_11&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="4" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row rowgap="0"&gt;⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_12-input.obfl">test_12<a href="#test_obfl-to-pef.xprocspec\test_12-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_12-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_12&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠂⠂⠂⠂⠂
      &lt;br/&gt;
      &lt;br/&gt;
                ⠯⠗⠼⠜⠌⠄
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_12-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_12&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠂⠂⠂⠂⠂&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠯⠗⠼⠜⠌⠄&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_13-input.obfl">test_13<a href="#test_obfl-to-pef.xprocspec\test_13-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_13-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_13&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="true" page-width="40" page-height="75"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-top="1" margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="0" margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="0" margin-bottom="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="1" row-spacing="1.0"&gt;
      &lt;block margin-top="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
                
      &lt;/block&gt;
      &lt;block&gt;⠒⠒⠒&lt;/block&gt;
      &lt;block margin-top="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
                
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_13-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_13&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="75" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="0"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_14-input.obfl">test_14<a href="#test_obfl-to-pef.xprocspec\test_14-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_14-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_14&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="true" page-width="40" page-height="35"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block margin-top="1" row-spacing="1.0"&gt;
      &lt;block margin-top="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
                
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_14-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_14&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="35" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_15-input.obfl">test_15<a href="#test_obfl-to-pef.xprocspec\test_15-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_15-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_15&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="false" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field/&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header row-spacing="2.0"&gt;
        &lt;field/&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿
              &lt;/block&gt;
    &lt;block break-before="page"&gt;⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_15-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_15&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_16-input.obfl">test_16<a href="#test_obfl-to-pef.xprocspec\test_16-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_16-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_16&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_16-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_16&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_17-input.obfl">test_17<a href="#test_obfl-to-pef.xprocspec\test_17-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_17-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_17&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_17-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_17&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_18-input.obfl">test_18<a href="#test_obfl-to-pef.xprocspec\test_18-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_18-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_18&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all"&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_18-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_18&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_19-input.obfl">test_19<a href="#test_obfl-to-pef.xprocspec\test_19-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_19-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_19&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_19-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_19&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_20-input.obfl">test_20<a href="#test_obfl-to-pef.xprocspec\test_20-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_20-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_20&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="1000"&gt;
    &lt;pre-content&gt;
      &lt;sequence master="a"&gt;
        &lt;block&gt;⠤⠤⠤⠤⠤⠤
                  &lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/pre-content&gt;
    &lt;post-content&gt;
      &lt;sequence master="a"&gt;
        &lt;block&gt;⠤⠤⠤⠤⠤⠤
                  &lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/post-content&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_20-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_20&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_21-input.obfl">test_21<a href="#test_obfl-to-pef.xprocspec\test_21-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_21-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_21&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template use-when="(= $volume 1)" sheets-in-volume-max="3"/&gt;
  &lt;volume-template use-when="(&gt; $volume 1)" sheets-in-volume-max="3"&gt;
    &lt;pre-content&gt;
      &lt;sequence master="a"&gt;
        &lt;block&gt;⠿⠿⠿⠿&lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/pre-content&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_21-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_21&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_22-input.obfl">test_22<a href="#test_obfl-to-pef.xprocspec\test_22-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_22-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_22&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template use-when="(= $volume 1)" sheets-in-volume-max="4"/&gt;
  &lt;volume-template use-when="(&gt; $volume 1)" sheets-in-volume-max="3"/&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_22-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_22&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_23-input.obfl">test_23<a href="#test_obfl-to-pef.xprocspec\test_23-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_23-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_23&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="master" duplex="true" page-number-variable="page" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block border-top-style="solid"&gt;
      &lt;block border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                  ⠿⠿⠿⠿⠿⠿
                &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_23-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_23&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_24-input.obfl">test_24<a href="#test_obfl-to-pef.xprocspec\test_24-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_24-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_24&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="master" duplex="true" page-number-variable="page" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_24-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_24&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_25-input.obfl">test_25<a href="#test_obfl-to-pef.xprocspec\test_25-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_25-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_25&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="master" duplex="true" page-number-variable="page" page-width="10" page-height="6"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_25-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_25&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_26-input.obfl">test_26<a href="#test_obfl-to-pef.xprocspec\test_26-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_26-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_26&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="11" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤
              
      &lt;marker class="foo" value="⠿"/&gt;
              ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
              ⠤⠤⠤⠤ ⠤⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_26-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_26&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="11" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠿⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠿⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_27-input.obfl">test_27<a href="#test_obfl-to-pef.xprocspec\test_27-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_27-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_27&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators/&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_27-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_27&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_28-input.obfl">test_28<a href="#test_obfl-to-pef.xprocspec\test_28-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_28-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_28&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="indicator/pagenum" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="indicator/pagenum" value="x"/&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_28-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_28&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="test_obfl-to-pef.xprocspec\test_29-input.obfl">test_29<a href="#test_obfl-to-pef.xprocspec\test_29-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>test_obfl-to-pef.xprocspec\test_29-input.obfl</h2>
<pre>
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;test_29&lt;/dc:title&gt;
    &lt;dc:description/&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="forward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>test_obfl-to-pef.xprocspec\test_29-expected.pef</h2>
<pre>
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;test_29&lt;/dc:title&gt;
      &lt;dc:description/&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠃⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
</body>
</html>
